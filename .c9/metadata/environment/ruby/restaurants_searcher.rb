{"changed":true,"filter":false,"title":"restaurants_searcher.rb","tooltip":"/ruby/restaurants_searcher.rb","value":"require 'net/http'\nrequire 'json'\n\n# 初期設定\nKEYID = \"8d9140505ba1553138a2e8324d489144\"\nHIT_PER_PAGE = 100\nPREF = \"PREF13\"\nFREEWORD_CONDITION = 1\nFREEWORD = \"渋谷駅\"\nPARAMS = {\"keyid\": KEYID, \"hit_per_page\":HIT_PER_PAGE, \"pref\":PREF, \"freeword_condition\":FREEWORD_CONDITION, \"freeword\":FREEWORD}\n\ndef write_data_to_csv(params)\n    restaurants = []\n    uri = URI.parse(\"https://api.gnavi.co.jp/RestSearchAPI/v3/\")\n    uri.query = URI.encode_www_form(PARAMS)  \n    json_res = Net::HTTP.get uri\n    \n    response = JSON.load(json_res)\n    \n    if response.has_key?(\"error\") then\n        puts \"エラーが発生しました！\"\n    end\n    for restaurant in response[\"rest\"] do\n        rest_name = restaurant[\"name\"]\n        restaurants.append(rest_name)\n    end\n    \n    File.open(\"restaurants_list.csv\", \"w\") do |file|\n        file << restaurants\n    end\n    return puts restaurants\nend\n\nwrite_data_to_csv(PARAMS)","undoManager":{"mark":5,"position":8,"stack":[[{"start":{"row":3,"column":21},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":4,"column":0},"end":{"row":5,"column":21},"action":"insert","lines":["restaurants = []","response = \"hugahuga\""],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":5,"column":21},"action":"remove","lines":["# restaurants_searcher.rb","","restaurants = \"hogehoge\"","response = \"hugahuga\"","restaurants = []","response = \"hugahuga\""],"id":5},{"start":{"row":0,"column":0},"end":{"row":8,"column":19},"action":"insert","lines":["# restaurants_searcher.rb","","def write_data_to_csv()","    restaurants = []","    response = \"hogehoge\"","","    return print restaurants","","write_data_to_csv()"]}],[{"start":{"row":0,"column":0},"end":{"row":8,"column":19},"action":"remove","lines":["# restaurants_searcher.rb","","def write_data_to_csv()","    restaurants = []","    response = \"hogehoge\"","","    return print restaurants","","write_data_to_csv()"],"id":7},{"start":{"row":0,"column":0},"end":{"row":12,"column":19},"action":"insert","lines":["# restaurants_searcher.rb","","def write_data_to_csv()","    restaurants = []","    response = {hogehoge:\"hogehoge\"}","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    ","    return puts restaurants","end","","write_data_to_csv()"]}],[{"start":{"row":2,"column":0},"end":{"row":12,"column":19},"action":"remove","lines":["def write_data_to_csv()","    restaurants = []","    response = {hogehoge:\"hogehoge\"}","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    ","    return puts restaurants","end","","write_data_to_csv()"],"id":9},{"start":{"row":2,"column":0},"end":{"row":15,"column":3},"action":"insert","lines":["def write_data_to_csv()","    restaurants = []","    response = \"hogehoge\"","    ","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    for restaurant in response[\"rest\"] do","        rest_name = restaurant[\"name\"]","        restaurants.append(rest_name)","    end","","    return puts restaurants","end"]}],[{"start":{"row":2,"column":0},"end":{"row":15,"column":3},"action":"remove","lines":["def write_data_to_csv()","    restaurants = []","    response = \"hogehoge\"","    ","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    for restaurant in response[\"rest\"] do","        rest_name = restaurant[\"name\"]","        restaurants.append(rest_name)","    end","","    return puts restaurants","end"],"id":11},{"start":{"row":2,"column":0},"end":{"row":19,"column":3},"action":"insert","lines":["def write_data_to_csv()","    restaurants = []","    response = \"hogehoge\"","    ","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    for restaurant in response[\"rest\"] do","        rest_name = restaurant[\"name\"]","        restaurants.append(rest_name)","    end","","    File.open(\"restaurants_list.csv\", \"w\") do |file|","        file << restaurants","    end","","    return puts restaurants","end"]}],[{"start":{"row":1,"column":0},"end":{"row":19,"column":3},"action":"remove","lines":["","def write_data_to_csv()","    restaurants = []","    response = \"hogehoge\"","    ","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    for restaurant in response[\"rest\"] do","        rest_name = restaurant[\"name\"]","        restaurants.append(rest_name)","    end","","    File.open(\"restaurants_list.csv\", \"w\") do |file|","        file << restaurants","    end","","    return puts restaurants","end"]},{"start":{"row":1,"column":0},"end":{"row":34,"column":25},"action":"insert","lines":["require 'net/http'","require 'json'","","# 初期設定","KEYID = \"メールに記載されていたアクセスキーをここに入力\"","HIT_PER_PAGE = 100","PREF = \"PREF13\"","FREEWORD_CONDITION = 1","FREEWORD = \"渋谷駅\"","PARAMS = {\"keyid\": KEYID, \"hit_per_page\":HIT_PER_PAGE, \"pref\":PREF, \"freeword_condition\":FREEWORD_CONDITION, \"freeword\":FREEWORD}","","def write_data_to_csv(params)","    restaurants = []","    uri = URI.parse(\"https://api.gnavi.co.jp/RestSearchAPI/v3/\")","    uri.query = URI.encode_www_form(PARAMS)  ","    json_res = Net::HTTP.get uri","    ","    response = JSON.load(json_res)","    ","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    for restaurant in response[\"rest\"] do","        rest_name = restaurant[\"name\"]","        restaurants.append(rest_name)","    end","    ","    File.open(\"restaurants_list.csv\", \"w\") do |file|","        file << restaurants","    end","    return puts restaurants","end","","write_data_to_csv(PARAMS)"]}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":25},"action":"remove","lines":["# restaurants_searcher.rb"],"id":13},{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":4,"column":9},"end":{"row":4,"column":32},"action":"remove","lines":["メールに記載されていたアクセスキーをここに入力"],"id":14},{"start":{"row":4,"column":9},"end":{"row":4,"column":41},"action":"insert","lines":["8d9140505ba1553138a2e8324d489144"]}]]},"ace":{"folds":[],"scrolltop":240,"scrollleft":0,"selection":{"start":{"row":4,"column":41},"end":{"row":4,"column":41},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":16,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1609391318985}